function getColorBids(e){return 0>=e?"#757780":7>=e?"#2ec4b6":15>=e?"#ff9f1c":23>=e?"#F7B32B":31>=e?"#F55D3E":39>=e?"#C81D25":void 0}function getBidsPercent(e){return 0>=e?0:void 0===e?0:e}function highlightFeature(e){var a=e.target;a.setStyle({weight:2,color:"#666",dashArray:"",fillOpacity:1}),L.Browser.ie||L.Browser.opera||L.Browser.edge||a.bringToFront(),info.update(a.feature.properties)}function resetHighlight(e){mapLayer.resetStyle(e.target),info.update()}function zoomToFeature(e){map.fitBounds(e.target.getBounds())}function onEachFeature(e,a){a.on({mouseover:highlightFeature,mouseout:resetHighlight,click:zoomToFeature})}function mapBidStyles(e){return{fillColor:getColorBids(e.properties.estimatedvalue),weight:2,opacity:1,color:"white",dashArray:3,fillOpacity:.7}}function a1(){return $.getJSON(predictionLocalJSON,{},function(e){dataj=e,dname="0",regName=$("#region-select").find(":selected").text().toLowerCase(),diName=$("#disease-select").find(":selected").text().toLowerCase(),$(".diseasespan").html($("#disease-select").find(":selected").text())})}function a2(){return $.getJSON("data/mumbaigeo.json",{},function(e){datag=e})}function loadthegraph(){for(var e=datag.features,a=0;a<e.length;a++)if(r=regions[a].toLowerCase(),dataj.region.hasOwnProperty(r)){var t=dataj.region[r].prediction[parseInt(dname)];datag.features[a].properties.estimatedvalue=t}mapLayer=L.geoJson(datag,{style:mapBidStyles,onEachFeature:onEachFeature}).addTo(map)}var dataj,datag,dname,regName,diName,mapLayer,mapFlat="https://api.mapbox.com/styles/v1/sidddgh/cizmr3k6j00532rpl9yhd926f/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoic2lkZGRnaCIsImEiOiJjaXl0MGkxZGgwMDFkMzJvNXQzdmYyMHUyIn0.x3U92aG_TUU_ffN5F6_46g",mapDark="https://api.mapbox.com/styles/v1/mapbox/dark-v9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoic2lkZGRnaCIsImEiOiJjaXl0MGkxZGgwMDFkMzJvNXQzdmYyMHUyIn0.x3U92aG_TUU_ffN5F6_46g",predictionLocalJSON="data/prediction.json",predictionOnlineJSON="http://192.168.43.63:5001/region/prediction",regions=["Dahisar","Borivali","Kandivali","Malad","Goregaon","Mulund","Jogeshwari","Vile_Parle","Kanjurmarg","Ghatkopar","Kurla","BKC","Bandra","Chembur","Mankhurd","Wadala","Dadar","Sewree","Parel","Lower_Parel","Nagpada","Malabar_Hill","Buleshwar","Wadi","Colaba"],map=L.map("map-display",{center:[19.076,72.8777],zoom:11,minZoom:2,maxZoom:18});mapLink='<a href="http://openstreetmap.org">OpenStreetMap</a>',L.tileLayer(mapFlat,{attribution:"Map data &copy; "+mapLink,maxZoom:18}).addTo(map),$.when(a1(),a2()).done(function(){loadthegraph()});var info=L.control();info.onAdd=function(e){return this._div=L.DomUtil.create("div","info"),this.update(),this._div},info.update=function(e){this._div.innerHTML="<h4>Disease Predition Rate</h4>"+(e?"<b>"+regions[e.gid]+"</b><br />"+getBidsPercent(e.estimatedvalue)+" people ":"Hover over highlighted places for more info")},info.addTo(map),$("#disease-select").change(function(){dname=$("#disease-select").val(),diName=$("#disease-select").find(":selected").text().toLowerCase(),map.removeLayer(datag),week=1,loadthegraph(),$(".diseasespan").html($("#disease-select").find(":selected").text())}),$("#region-select").change(function(){regName=$("#region-select").find(":selected").text().toLowerCase()});